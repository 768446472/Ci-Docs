# GPIO

## 功能介绍

通用I/O 接口支持超40个可编程的输入/输出管脚，每个GPIO 端口都有相应的控制寄存器和配置寄存器，以满足不同应用的要求，共分为6组，每组最多可控制8个。

* 可编程控制的GPIO中断
    * 中断屏蔽控制
    * 上升沿、下降沿或双边沿触发
    * 高电平或低电平触发
* 每个GPIO 管脚都可由软件单独配置为输入或输出
* 可单独打开/关闭每个GPIO管脚

GPIO是作为第三功能与其他功能复用，具体复用关系见系统控制单元SCU文档中的表6☞[请点击这里查看](系统控制单元SCU.md#IO_multireg1)。复用关系由系统控制单元的寄存器IO_REUSE_CFG配置。

每一组管脚功能使用时需要配置对应的IO_REUSE_CFG寄存器位，如将UART0_TX pad配置成UART0功能，则需要将寄存器IO_REUSE_CFG0的第0位和第1位配置为0x1；如将这个引脚配置为GPIO功能，则将寄存器IO_REUSE_CFG0的第0位和第1位配置为0x0。模拟管脚需要根据复用情况先选择该管脚是作为模拟管脚使用，还是数字管脚使用。

## 寄存器映射

GPIO0 / 1 / 2 / 3 / 4 / 5寄存器映射基地址为0x40040000、0x40041000、0x40042000、0x40043000、0x40044000、0x4003E000，每组寄存器详见表16。

<div align=center>表16 GPIO寄存器映射</div>

<center>

偏移量 | 名称 | 位宽 | 类型 | 复位值 | 描述
:--: | :--: | :--: | :--: | :--: | :--:
0x000~0x3FC | GPIODATA | 8 | R/W | 0x00000000 | 数据寄存器
0x400 | GPIODIR | 8 | R/W | 0x00000000 | 数据方向寄存器
0x404 | GPIOIS | 8 | R/W | 0x00000000 | 中断源（电平/边沿）寄存器
0x408 | GPIOIBE | 8 | R/W | 0x00000000 | 中断源双沿触发寄存器
0x40C | GPIOIEV | 8 | R/W | 0x00000000 | 中断事件寄存器
0x410 | GPIOIE | 8 | R/W | 0x00000000 | 中断屏蔽寄存器
0x414 | GPIORIS | 8 | R | 0x00000000 | 中断原始状态寄存器
0x418 | GPIOMIS | 8 | R | 0x00000000 | 中断屏蔽状态寄存器
0x41C | GPIOIC | 8 | W | 0x00000000 | 中断清除寄存器
0x424 | GPIOEN | 8 | R/W | 0x00000000 | 使能寄存器

</center>

## 数据寄存器（GPIODATA）

偏移量：0x000 ~ 0x3FC

复位值：0x00000000

<center>

位域 | 名称 | 复位值 | 类型 | 描述
:--: | :--: | :--: | :--: | :--
31:8 | Reserved | 0x00000000 | R/W | 保留
7:0 | GPIODATA | 0x0 | R/W | GPIO数据寄存器。数据的有效位是与地址mask的结果，偏移地址[9:2]，bit位高，则数据有效，bit为低的，不影响对应的数据。<br>GPIO配置为输入时，读此寄存器<br>GPIO配置为输出时，写此寄存器

</center>

## 数据方向寄存器（GPIODIR）

偏移量：0x400

复位值：0x00000000

<center>

位域 | 名称 | 复位值 | 类型 | 描述
:--: | :--: | :--: | :--: | :--
31:8 | Reserved | 0x00000000 | R/W | 保留
7:0 | GPIODIR | 0x00000000 | R/W | GPIO数据方向寄存器。<br>0：输入<br>1：输出

</center>

## 中断源寄存器（GPIOIS）

偏移量：0x404

复位值：0x00000000

<center>

位域 | 名称 | 复位值 | 类型 | 描述
:--: | :--: | :--: | :--: | :--
31:8 | Reserved | 0x00000000 | R/W | 保留
7:0 | GPIOIS | 0x00000000 | R/W | GPIO中断源寄存器。<br>0：边沿<br>1：电平

</center>

## 中断源双沿触发寄存器（GPIOIBE）

偏移量：0x408

复位值：0x00000000

<center>

位域 | 名称 | 复位值 | 类型 | 描述
:--: | :--: | :--: | :--: | :--
31:8 | Reserved | 0x00000000 | R/W | 保留
7:0 | GPIOIBE | 0x00000000 | R/W | GPIO中断源双沿寄存器。<br>0：中断触发事件由GPIOIEV控制<br>1：为双沿触发（GPIOIS配置为0）

</center>

## 中断事件寄存器（GPIOIEV）

偏移量：0x40C

复位值：0x00000000

<center>

位域 | 名称 | 复位值 | 类型 | 描述
:--: | :--: | :--: | :--: | :--
31:8 | Reserved | 0x00000000 | R/W | 保留
7:0 | GPIOIEV | 0x00000000 | R/W | GPIO中断事件寄存器。<br>0：下降沿或低电平<br>1：上升沿或高电平

</center>

## 中断屏蔽寄存器（GPIOIE）

偏移量：0x410

复位值：0x00000000

<center>

位域 | 名称 | 复位值 | 类型 | 描述
:--: | :--: | :--: | :--: | :--
31:8 | Reserved | 0x00000000 | R/W | 保留
7:0 | GPIOIE | 0x00000000 | R/W | GPIO中断屏蔽寄存器。<br>0：屏蔽中断<br>1：不屏蔽中断

</center>

## 中断原始状态寄存器（GPIORIS）

偏移量：0x414

复位值：0x00000000

<center>

位域 | 名称 | 复位值 | 类型 | 描述
:--: | :--: | :--: | :--: | :--
31:8 | Reserved | 0x00000000 | R | 保留
7:0 | GPIORIS | 0x00000000 | R | GPIO中断原始状态寄存器。反映了屏蔽之前的中断状态。

</center>

## 中断屏蔽状态寄存器（GPIOMIS）

偏移量：0x418

复位值：0x00000000

<center>

位域 | 名称 | 复位值 | 类型 | 描述
:--: | :--: | :--: | :--: | :--
31:8 | Reserved | 0x00000000 | R | 保留
7:0 | GPIOMIS | 0x00000000 | R | GPIO中断屏蔽状态寄存器。反映了屏蔽之后的中断状态。

</center>

## 中断清除寄存器（GPIOIC）

偏移量：0x41C

复位值：0x00000000

<center>

位域 | 名称 | 复位值 | 类型 | 描述
:--: | :--: | :--: | :--: | :--
31:8 | Reserved | 0x00000000 | W | 保留
7:0 | GPIOIC | 0x00000000 | W | GPIO中断清除寄存器。<br>1：清除相应中断状态<br>0：不影响

</center>

## 使能寄存器（GPIOEN）

偏移量：0x424

复位值：0x00000000

<center>

位域 | 名称 | 复位值 | 类型 | 描述
:--: | :--: | :--: | :--: | :--
31:8 | Reserved | 0x00000000 | R/W | 保留
7:0 | GPIOEN | 0x00000000 | R/W | GPIO使能寄存器。<br>0：禁止<br>1：使能

</center>